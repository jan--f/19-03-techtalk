<!-- .slide: data-state="cover" id="prometheus-cover-page" data-timing="20" data-menu-title="Monitoring Ceph with Prometheus" -->

<div class="title">
    <h1>Monitoring Ceph with Prometheus</h1>
    <h2></h2>
</div>

<div class="row presenters">
    <div class="presenter presenter-1">
        <h3 class="name">Jan Fajerski</h3>
        <h3 class="job-title">Senior Software Engineer</h3>
        <h3 class="email"><a href="mailto:jan.fajerski@suse.com">jan.fajerski@suse.com</a></h3>
    </div>
</div>


<!-- .slide: data-state="normal" id="agenda" data-menu-title="Agenda" -->
## Agenda

* **Grafana**

* **Prometheus**
    * Intro
    * Exporters
    * Configuration
    * Query language
    * Alerting
    * Deployment considerations


<!-- .slide: data-state="normal" id="grafana-intro" data-timing="30" -->
## Grafana
<h3>
The open platform for beautiful analytics and monitoring
</h3>
 some dashboard images

* _origins of grafana?_
* Supports many data sources (55 as of March 2019)
* Many features (most we won't use)


<!-- .slide: data-state="normal" id="prometheus-intro" data-timing="30" -->
## Prometheus

<h3>
A leading open-source monitoring solution
</h3>

<img data-src="images/prom-users.png" style="height: 200px; position: absolute;
top: 400px; left: 900px"/>

* Originally developed at SoundCloud (started 2012), inspired by Borgmon
* CNCF member project (2nd ever Incubator Project)
* Built for highly-dimensional data, simple operations, scalability
* Powerful query language
* Widely adopted

Note:
* scalability often considered to be a result of the pull based model
* also users: SUSE and most SES customers


<!-- .slide: data-state="normal" id="alertmanager-intro" data-timing="30" -->
## Alertmanager

<blockquote cite="https://github.com/prometheus/alertmanager">
The Alertmanager handles alerts sent by client applications such as the Prometheus server. It takes care of deduplicating, grouping, and routing them to the correct receiver integrations such as email, PagerDuty, or OpsGenie. It also takes care of silencing and inhibition of alerts.
</blockquote>

* Part of the Prometheus project
* Can be used without Prometheus

Note:
* Alerts are generated by Prometheus
* Prometheus interacts with Alertmanagers http API


<!-- .slide: data-state="normal" id="exporters-intro" data-timing="30" -->
## Exporters

* node_exporter, Prometheus mgr module
* HTTP interface, plain text
* Format **(maybe rather add screenshot)**:

<code>
my_metric_name{labelname="labelvalue", ...} metric_value
</code>
* Ideally also Help and Type hints:

<code>
\# TYPE my_metric_name counter <br />
\# HELP my_metric_name metric descirption
</code>
* more guidelines https://prometheus.io/docs/instrumenting/writing_exporters/
* list of available exporters: https://github.com/prometheus/docs/blob/master/content/docs/instrumenting/exporters.md

Note:
